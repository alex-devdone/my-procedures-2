# Ralphy Progress Log

- [✓] 2026-01-19 20:55 - Update todo schema to add userId foreign key
- [✓] 2026-01-19 20:56 - Run database migration
- [✓] 2026-01-19 20:59 - Update todo router to use protectedProcedure
- [✓] 2026-01-19 21:01 - Create auth client for frontend
- [✓] 2026-01-19 21:05 - Create login page
- [✓] 2026-01-19 21:05 - Create signup page
- [✓] 2026-01-19 21:06 - Create auth layout with protected routes
- [✓] 2026-01-19 21:07 - Create local storage service for todos
- [✓] 2026-01-19 21:11 - Create todo storage abstraction hook
- [✓] 2026-01-19 21:12 - Create header with auth state
- [✓] 2026-01-19 21:15 - Update todo components to use storage abstraction
- [✓] 2026-01-19 21:18 - Add sync local todos to database on login
- [✓] 2026-01-19 21:22 - Refactor to entity-based API structure
- [✓] 2026-01-19 21:24 - Update CLAUDE.md with entity-based API structure
- [✓] 2026-01-19 21:24 - Fix useSyncExternalStore infinite loop in todo.hooks.ts
- [✓] 2026-01-19 21:26 - Change default dev port to 4757
- [✓] 2026-01-19 21:39 - Redesign app UI/UX using frontend-design skill
- [✓] 2026-01-19 21:43 - Set up unit testing infrastructure
- [✓] 2026-01-19 21:50 - Extract business logic into testable hooks/utilities
- [✓] 2026-01-19 21:58 - Write unit tests for business logic
- [✓] 2026-01-19 21:58 - Fix 403 INVALID_ORIGIN error in Better-Auth

- [✓] 2026-01-19 22:15 - Set up Playwright for E2E testing
- [✓] 2026-01-19 23:19 - Write E2E tests for todo CRUD operations
- [✓] 2026-01-19 23:35 - Fix todo toggle causing full list reload

- [✓] 2026-01-20 22:54 - Create folder schema (packages/db/src/schema/folder.ts) with id, name, color, userId, createdAt, order
- [✓] 2026-01-20 22:54 - Add unit tests for folder schema validation (packages/db/src/schema/folder.test.ts)
- [✓] 2026-01-20 22:57 - Update todo schema with scheduling fields (dueDate, reminderAt, recurringPattern, folderId) and indexes
- [✓] 2026-01-20 22:57 - Add unit tests for updated todo schema (packages/db/src/schema/todo.test.ts)
- [✓] 2026-01-20 23:01 - Create subtask schema (packages/db/src/schema/subtask.ts) with id, text, completed, todoId, order
- [✓] 2026-01-20 23:01 - Add unit tests for subtask schema (packages/db/src/schema/subtask.test.ts)
- [✓] 2026-01-20 23:03 - Update schema index to export folder and subtask schemas, add subtasks relation to todoRelations
- [✓] 2026-01-20 23:13 - Generate Drizzle migrations (0001_easy_sally_floyd.sql) for folder, subtask tables and todo scheduling fields
- [✓] 2026-01-20 23:25 - Apply database schema changes using db:push (folder, subtask tables and todo scheduling fields)

- [✓] 2026-01-20 23:21 - Create folder router (packages/api/src/routers/folder.ts) with CRUD procedures: list, create, update, delete, reorder
- [✓] 2026-01-20 23:21 - Add unit tests for folder router (packages/api/src/routers/folder.test.ts) with 58 tests
- [✓] 2026-01-20 23:21 - Add folder router to main tRPC router (packages/api/src/routers/index.ts)
- [✓] 2026-01-20 23:21 - Add Zod validation schemas for folder inputs (folderColorSchema, createFolderInputSchema, updateFolderInputSchema, deleteFolderInputSchema, reorderFolderInputSchema)
- [✓] 2026-01-20 23:21 - Add missing drizzle-orm exports (gt, gte, lt, lte) to packages/db/src/index.ts

- [✓] 2026-01-20 23:25 - Create folder.types.ts with TypeScript types (Folder, RemoteFolder, LocalFolder, FolderColor) and Zod schemas
- [✓] 2026-01-20 23:25 - Add unit tests for folder types/schemas (43 tests) in folder.types.test.ts
- [✓] 2026-01-20 23:28 - Create folder.api.ts with tRPC query/mutation options (getAllFoldersQueryOptions, getFoldersQueryKey, create/update/delete/reorder mutation options)

- [✓] 2026-01-20 23:44 - Create folder.hooks.ts with useFolderStorage React hook (dual-mode: localStorage for guests, tRPC for authenticated)
- [✓] 2026-01-20 23:44 - Implement optimistic updates for folder CRUD operations (create, update, delete, reorder)
- [✓] 2026-01-20 23:44 - Add unit tests for folder hooks (20 tests) in folder.hooks.test.tsx
- [✓] 2026-01-20 23:44 - Create local-folder-storage.ts for localStorage folder management (getAll, create, update, delete, reorder, clearAll)
- [✓] 2026-01-20 23:44 - Fix RemoteFolder type to use createdAt: string (ISO serialization over JSON)
- [✓] 2026-01-20 23:47 - Create folder barrel export (apps/web/src/app/api/folder/index.ts) with types, schemas, API functions, and hooks
- [✓] 2026-01-20 23:50 - Add unit tests for local folder storage (35 tests) in apps/web/src/lib/local-folder-storage.test.ts
